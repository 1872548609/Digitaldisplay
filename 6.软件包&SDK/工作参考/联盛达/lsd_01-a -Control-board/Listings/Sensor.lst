C51 COMPILER V9.54   SENSOR                                                                07/12/2025 08:11:00 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE SENSOR
OBJECT MODULE PLACED IN .\Objects\Sensor.obj
COMPILER INVOKED BY: E:\keilC51\C51\BIN\C51.EXE scr\Sensor.c OPTIMIZE(9,SIZE) BROWSE INCDIR(.\inc;.\USER) DEBUG OBJECTEX
                    -TEND PRINT(.\Listings\Sensor.lst) TABS(2) OBJECT(.\Objects\Sensor.obj)

line level    source

   1          #include "Sensor.h"
   2          
   3          #define TempMaxLimit    180 //温度最大限制    
   4          #define PressureErr     0xFE//压力传感器错误码
   5          #define ErrDelay        150 //延时1.5s
   6          
   7          void CheckSensor(void)
   8          {
   9   1         static u8 DelayCount  =0;
  10   1      //    static u8 DelayCount1 =0;
  11   1        static u8 DelayCount2 =0;
  12   1        DelayCount2++;
  13   1        if(DelayCount2>=50)
  14   1        {
  15   2          DelayCount2=0;
  16   2          FlashUartByte(CMD_ADSensor);
  17   2        }
  18   1         if((DeviceStatus > status_Down)&&(DeviceStatus < status_Err))
  19   1         {
  20   2             if(AdPara.CurCoffeTemp>= TempMaxLimit)
  21   2             {
  22   3                 DelayCount++;
  23   3                 if(DelayCount>=ErrDelay)
  24   3                 {
  25   4                      DelayCount=0;
  26   4                      if(AdPara.CurCoffeTemp== SHORTERR)
  27   4                      ErrCode |= ErrPotNtcShort|ErrUniversal;
  28   4                      else if(AdPara.CurCoffeTemp== BROKENERR)
  29   4                      ErrCode |= ErrPotNtcOpen|ErrUniversal;
  30   4                      else
  31   4                      ErrCode |= ErrPotNtcHot|ErrUniversal;
  32   4                      DeviceStatus = status_Err;
  33   4                 }
  34   3             }
  35   2             else
  36   2                 DelayCount =0;
  37   2      
  38   2              // if(AdPara.Press>= PressureErr)
  39   2              // {
  40   2              //     DelayCount1++;
  41   2              //     if(DelayCount1>=ErrDelay)
  42   2              //     {
  43   2              //         DelayCount1=0;
  44   2              //         ErrCode |= ErrPressure;
  45   2              //         DeviceStatus = status_Err;
  46   2              //     }
  47   2              // }
  48   2              // else
  49   2              //     DelayCount1 =0;
  50   2         }
  51   1      }
  52          
  53          
  54          
C51 COMPILER V9.54   SENSOR                                                                07/12/2025 08:11:00 PAGE 2   

  55          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     97    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
